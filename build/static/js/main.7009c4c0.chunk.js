(this.webpackJsonpbookapi=this.webpackJsonpbookapi||[]).push([[0],{16:function(e,t,a){e.exports=a(24)},21:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(10),o=a.n(s),l=(a(21),a(11)),r=a(12),c=a(5),h=a(15),u=a(14),p=a(6),m=(a(22),a(8)),g=(a(23),a(7)),d=a.n(g),b=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.onClick=n.onClickNext.bind(Object(c.a)(n)),n.onClickRPP=n.onClickRPP.bind(Object(c.a)(n)),n.handleChange=n.handleChange.bind(Object(c.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(c.a)(n)),n.handleClearForm=n.handleClearForm.bind(Object(c.a)(n)),n.state={error:null,isLoaded:!1,items:[],getpagesarray:[],totalitems:0,page:1,itemsPerPage:20,typedvalue:"",searchedvalue:""},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=new URL(document.location).searchParams.get("page");null!=t&&this.setState({page:parseInt(t)}),fetch("http://nyx.vima.ekt.gr:3000/api/books/",{method:"post",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({page:this.state.page,itemsPerPage:this.state.itemsPerPage,filters:[]})}).then((function(e){return e.json()})).then((function(t){e.setState({items:t.books,totalitems:t.count,isLoaded:!0,getpagesarray:Array.from(Array(Math.ceil(t.count/e.state.itemsPerPage)).keys())})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidUpdate",value:function(e,t){var a=this;t.page===this.state.page&&t.itemsPerPage===this.state.itemsPerPage&&t.searchedvalue===this.state.searchedvalue||fetch("http://nyx.vima.ekt.gr:3000/api/books/",{method:"post",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({page:this.state.page,itemsPerPage:this.state.itemsPerPage,filters:[{type:"all",values:[this.state.searchedvalue]}]})}).then((function(e){return e.json()})).then((function(e){a.setState({items:e.books,isLoaded:!0,totalitems:e.count,getpagesarray:Array.from(Array(Math.ceil((e.count+20)/a.state.itemsPerPage)).keys())})})),window.history.replaceState(null,null,"/?page="+parseInt(this.state.page)),d()(".book-listing-page").removeClass("book-listing-page-active"),d()(".book-listing-page.page-"+this.state.page).addClass("book-listing-page-active")}},{key:"onClickNext",value:function(e){if(""!==this.state.searchedvalue||this.state.totalitems<20);else if("prev"!==e&&"next"!==e)this.setState({page:e});else{var t=Math.ceil(this.state.totalitems/this.state.itemsPerPage);"next"===e?this.state.page===t?this.setState({page:1}):this.setState({page:this.state.page+1}):1===this.state.page?this.setState({page:t}):this.setState({page:this.state.page-1})}}},{key:"onClickRPP",value:function(e){}},{key:"handleChange",value:function(e){this.setState({typedvalue:e.target.value})}},{key:"handleSubmit",value:function(e){this.setState({searchedvalue:this.state.typedvalue,page:1}),e.preventDefault()}},{key:"handleClearForm",value:function(){this.setState({searchedvalue:"",typedvalue:""})}},{key:"render",value:function(){var e=this,t=this.state,a=t.error,n=t.isLoaded;return a?i.a.createElement("div",null,"Error: ",a.message):n?i.a.createElement("div",{className:"book-listing-container"},i.a.createElement("div",{className:"book-listing-total"},"Total Items: ",this.state.totalitems),i.a.createElement("form",{className:"book-listing-form",onSubmit:this.handleSubmit},i.a.createElement("label",null,i.a.createElement("input",{type:"text",placeholder:"Book Search...",value:this.state.typedvalue,onChange:this.handleChange})),i.a.createElement("input",{onClick:this.handleClearForm,type:"reset",value:"Reset"}),i.a.createElement("input",{type:"submit",value:"Search"})),i.a.createElement(m.a,{className:"btn-prev",onClick:this.onClickNext.bind(this,"prev")},"Prev"),i.a.createElement(m.a,{className:"btn-next",onClick:this.onClickNext.bind(this,"next")},"Next"),i.a.createElement("div",{className:"book-listing-paginate",id:"book-listing-paginate"},this.state.getpagesarray.slice(1).map((function(t){return i.a.createElement("span",{className:"book-listing-page page-".concat(t),key:t,onClick:e.onClickNext.bind(e,t)},t)}))),i.a.createElement("div",{className:"book-listing-items"},this.state.items.map((function(e){return i.a.createElement(p.a,{className:"card-custom-sml",bg:"primary",key:e.id},i.a.createElement(p.a.Header,{as:"h5"},e.book_title),i.a.createElement(p.a.Body,null,i.a.createElement(p.a.Title,null,e.book_author),i.a.createElement(p.a.Text,null,i.a.createElement("span",null,"Year: ",e.book_publication_year),i.a.createElement("span",null,"Country: ",e.book_publication_country),i.a.createElement("span",null,"City: ",e.book_publication_city),i.a.createElement("span",null,"Pages: ",e.book_pages))))})))):i.a.createElement("div",null,"Loading...")}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.7009c4c0.chunk.js.map